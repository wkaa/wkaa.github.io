---
layout: post
title: 编译中O1、O2、O3的含义
categories: C
description: 简述一下编译优化的含义
keywords: C语言
---

　　半个月没有更新了，今天有空就简单更新一篇，编译中O1、O2、O3有什么作用

　　这东西搜索一下就能找到了其实，我在知乎中看到别人归纳了，在这里也归纳保留一下

　　优化选项的具体功能都能在[Options That Control Optimization](https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)里面找到

　　当优化标识被启用之后，gcc编译器将会试图改变程序的结构（当然会在保证变换之后的程序与源程序语义等价的前提之下），以满足某些目标，如：代码大小最小或运行速度更快（只不过通常来说，这两个目标是矛盾的，二者不可兼得）。

1.-O，-O1：

　　两个命令的效果是一样的，目的都是在不影响编译速度的前提下，尽量采用一些优化算法降低代码大小和可执行代码的运行速度。

2.-O2：

　　该优化选项会牺牲部分编译速度，除了执行-O1所执行的所有优化之外，还会采用几乎所有的目标配置支持的优化算法，用以提高目标代码的运行速度。

3.-O3

　　该选项除了执行-O2所有的优化选项之外，一般都是采取很多向量化算法，提高代码的并行执行程度，利用现代CPU中的流水线，Cache等。这个选项会提高执行代码的大小，当然会降低目标代码的执行时间。

4.-Os

　　这个优化标识和-O3有异曲同工之妙，当然两者的目标不一样，-O3的目标是宁愿增加目标代码的大小，也要拼命的提高运行速度，但是这个选项是在-O2的基础之上，尽量的降低目标代码的大小，这对于存储容量很小的设备来说非常重要。为了降低目标代码大小，会禁用下列优化选项，一般就是压缩内存中的对齐空白(alignment padding)

5.-Ofast:

　　该选项将不会严格遵循语言标准，除了启用所有的-O3优化选项之外，也会针对某些语言启用部分优化。

6.-Og:

　　该标识会精心挑选部分与-g选项不冲突的优化选项，当然就能提供合理的优化水平，同时产生较好的可调试信息和对语言标准的遵循程度。

摘自知乎
作者：知乎用户
链接：https://www.zhihu.com/question/27090458/answer/137944410
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

